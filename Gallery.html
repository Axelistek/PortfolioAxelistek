<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gallery</title>
<style>
/*** VCR OSD Mono Font ***/
@font-face {
    font-family: 'VCR_OSD_Mono';
    src: url('font/VCR_OSD_MONO_1.001.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

/*** FAKE WINDOWS CSS (WITH VCR FONT) ***/
body { 
    background-image: url("image/Pozadina.png"); 
    background-size: cover;      
    background-repeat: no-repeat; 
    background-position: center;  
    background-attachment: fixed; 
    font-family: 'VCR_OSD_Mono', monospace;
    font-size: 0.875em;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
} 

center { text-align: center; } 

/* Make all text white */
#wrapper, #wrapper * {
    color: white;
}

/* Flicker Effect */
@keyframes flicker {
0% {opacity: 0.27861;}
5% {opacity: 0.34769;}
10% {opacity: 0.23604;}
15% {opacity: 0.90626;}
20% {opacity: 0.18128;}
25% {opacity: 0.83891;}
30% {opacity: 0.65583;}
35% {opacity: 0.67807;}
40% {opacity: 0.26559;}
45% {opacity: 0.84693;}
50% {opacity: 0.96019;}
55% {opacity: 0.08594;}
60% {opacity: 0.20313;}
65% {opacity: 0.71988;}
70% {opacity: 0.53455;}
75% {opacity: 0.37288;}
80% {opacity: 0.71428;}
85% {opacity: 0.70419;}
90% {opacity: 0.7003;}
95% {opacity: 0.36108;}
100% {opacity: 0.24387;}
}

#wrapper::after {
    content: " ";
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background: rgba(18, 16, 16, 0.1);
    opacity: 0;
    z-index: 2;
    pointer-events: none;
    animation: flicker 0.15s infinite;
}

#wrapper::before {
    content: " ";
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
    z-index: 2;
    background-size: 100% 2px, 3px 100%;
    pointer-events: none;
}

/* WRAPPER */
#wrapper { 
    width: 1150px;
    height: min-content;
    min-height: 800px;  
    background: rgba(0, 0, 0, 0.3);
    margin: 0 auto; 
    margin-top: 0px; 
    padding-bottom: 90px; 
    position: relative; 
    z-index: 1;
} 

.wrapper-2 { 
    position: relative; 
    min-height: 800px; 
} 

.header { 
    text-align: center; 
    padding: 0px 0;
    margin-left: 0;
} 
.header img { 
    width: calc(100% - 20px); 
    height: auto;
    max-height: 150px;
    max-width: 1180px;
    padding: 0 10px;
} 

.footer { height: 10px; } 
.title { padding: 15px 10px 10px 20px; } 
.title h1 { padding: 0; margin: 0; } 

/* Links as image buttons */
.links {
    padding: 5px; 
    text-align: center;
}

.link-home { margin: 0 35px; display: inline-block; }
.link-gallery { margin: 0 20px; display: inline-block; }
.link-projects { margin: 0 30px; display: inline-block; }
.link-contact { margin: 0 15px; display: inline-block; }

.btn-home { width: 70px; height: auto; }
.btn-gallery { width: 100px; height: auto; }
.btn-projects { width: 110px; height: auto; }
.btn-contact { width: 100px; height: auto; }

.btn-home:hover { content: url("image/buttons/Home_ButtonClick.png"); }
.btn-gallery:hover { content: url("image/buttons/GalleryClick_Button.png"); }
.btn-projects:hover { content: url("image/buttons/ProjectsClick_Button.png"); }
.btn-contact:hover { content: url("image/buttons/ContactClick_Button.png"); }

.sidebar-left { width: 200px; position: absolute; top: 0; left: 10px; } 
.sidebar-right { width: 250px; position: absolute; top: 0; right: 10px; }

/* ⭐ ALIGN ALL TOP BOXES ⭐ */
.sidebar-left .box,
.sidebar-right .box {
    height: auto;
    min-height: 250px;
    display: flex;
    flex-direction: column;
}

.sidebar-left {
    display: flex;
    flex-direction: column;
    align-items: stretch;
}

.main { margin-left: 220px; margin-right: 0; width: calc(100% - 220px); } 

.box { 
    padding: 5px 10px; 
    background: url("image/SquaresBackround.png"); 
    background-size: cover; 
    background-position: center;
    color: white;          
    margin: 10px 0 15px; 
    border: none;          
}

.main .box {
    background: url("image/PozadinaVerticalLong.png");
    background-size: cover;
    background-position: center;
}

.box h1,
.box h2,
.box h3,
.box p { opacity: 0.9; }

.box img { max-width: 100%; height: auto; } 

/* Navigation Links */
.nav-links {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.nav-item {
    color: white;
    text-decoration: none;
    padding: 8px 0;
    cursor: pointer;
    transition: color 0.2s, transform 0.2s;
    font-size: 0.95em;
    font-weight: bold;
}

.nav-item:hover {
    color: #90EE90;
    transform: translateX(5px);
    text-shadow: 0 0 10px rgba(0, 150, 255, 0.8);
}

.nav-item.expandable::after {
    content: ' ▼';
    transition: transform 0.3s;
}

.nav-item.expandable.expanded::after {
    transform: rotate(180deg);
}

.nav-submenu {
    display: none;
    flex-direction: column;
    gap: 8px;
    margin-left: 15px;
    margin-top: 8px;
    padding-left: 0;
}

.nav-submenu.show {
    display: flex;
}

.nav-submenu a,
.nav-submenu span {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    padding: 5px 0 5px 20px;
    cursor: pointer;
    transition: color 0.2s;
    font-size: 0.85em;
    position: relative;
}

.nav-submenu a::before,
.nav-submenu span::before {
    content: '\25B6';
    position: absolute;
    left: 0;
    font-size: 0.7em;
}

.nav-submenu a:hover,
.nav-submenu span:hover {
    color: #90EE90;
}

/* NEW NAVIGATION STYLES */
/* Jump To Navigation Box */
.jump-to-box {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 10px 0;
    align-items: center;
}

.jump-to-label {
    font-size: 1.1em;
    font-weight: bold;
    color: white;
    margin-bottom: 8px;
    text-align: center;
}

.jump-to-links {
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 70%;
    max-width: 140px;
}

.jump-to-link {
    color: white;
    text-decoration: none;
    padding: 12px 12px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 1.1em;
    font-weight: bold;
    border: 2px solid white;
    border-radius: 8px;
    display: block;
    text-align: center;
    background: transparent;
    width: 100%;
    box-sizing: border-box;
}

.jump-to-link:hover {
    color: #00A0FF;
    border-color: #00A0FF;
    text-shadow: 0 0 10px rgba(0, 150, 255, 0.8);
    transform: scale(1.02);
}

/* Jump Back Navigation Box */
.jump-back-box {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 10px 0;
}

.jump-back-label {
    font-size: 1.1em;
    font-weight: bold;
    color: white;
    margin-bottom: 8px;
    text-align: center;
}

.jump-back-items {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.jump-back-item {
    color: white;
    text-decoration: none;
    padding: 12px 0;
    cursor: pointer;
    transition: color 0.2s, transform 0.2s;
    font-size: 1.05em;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    width: 100%;
}

.jump-back-item:hover {
    color: #00A0FF;
    text-shadow: 0 0 10px rgba(0, 150, 255, 0.8);
    transform: translateX(5px);
}

.jump-back-item.expandable::after {
    content: '→';
    font-size: 0.8em;
    transition: transform 0.3s;
}

.jump-back-item.expandable.expanded::after {
    transform: rotate(90deg);
}

.jump-back-submenu {
    display: none;
    flex-direction: column;
    gap: 6px;
    margin-left: 20px;
    margin-top: 4px;
    padding-left: 0;
}

.jump-back-submenu.show {
    display: flex;
}

.jump-back-submenu a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    padding: 4px 0;
    cursor: pointer;
    transition: color 0.2s;
    font-size: 0.85em;
}

.jump-back-submenu a:hover {
    color: #90EE90;
}

/* Gallery Grid */
.gallery-container {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.gallery-category {
    transition: max-height 0.4s ease-in-out;
    max-height: none;
    overflow: visible;
    margin-bottom: 40px;
}

.gallery-category.collapsed {
    max-height: 50px;
    overflow: hidden;
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
        overflow: hidden;
    }
    to {
        opacity: 1;
        max-height: 1500px;
    }
}

.category-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
    cursor: pointer;
}

.category-title {
    font-size: 2em;
    font-weight: bold;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 2px;
}

.category-toggle {
    font-size: 1.5em;
    color: white;
    cursor: pointer;
    transition: transform 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 25px;
    height: 25px;
}

.category-toggle::before {
    content: '\25B6';
    font-size: 0.9em;
}

.gallery-category.collapsed .category-toggle::before {
    content: '\25B6';
}

.gallery-category:not(.collapsed) .category-toggle::before {
    content: '\25BC';
}

.gallery-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    animation: fadeIn 0.8s ease-in-out;
    margin: 0;
    margin-bottom: 30px;
    grid-auto-flow: dense;
    max-width: 100%;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.gallery-item {
    overflow: hidden;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.1);
    width: 100%;
    height: 500px;
}

.gallery-item.horizontal {
}

.gallery-item[data-fit="contain"] {
    grid-column: span 2;
    height: 500px;
}

.gallery-item.placeholder {
    background: rgba(255, 255, 255, 0.05);
    border: 2px dashed rgba(255, 255, 255, 0.2);
    cursor: default;
}

.gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
}

.gallery-item[data-fit="contain"] img {
    object-fit: cover;
    background: rgba(0, 0, 0, 0.1);
}

.gallery-item:hover img {
    transform: scale(1.05);
}

.gallery-item:hover {
    border-color: rgba(0, 150, 255, 0.8);
    box-shadow: 0 0 15px rgba(0, 150, 255, 0.5);
}

/* Lightbox Modal */
.lightbox {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    z-index: 1000;
    align-items: center;
    justify-content: center;
}

.lightbox.active {
    display: flex;
}

.lightbox-content {
    position: relative;
    max-width: 85vw;
    max-height: 85vh;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.lightbox-image {
    max-width: calc(85vw - 140px);
    max-height: 75vh;
    object-fit: contain;
    background: transparent;
    display: block;
    margin: 0 auto;
}

.lightbox-info {
    margin-top: 20px;
    text-align: center;
    color: white;
    font-family: 'VCR_OSD_Mono', monospace;
}

.lightbox-info h3 {
    margin: 0 0 10px 0;
    font-size: 1.5em;
}

.lightbox-info p {
    margin: 0;
    font-size: 1em;
    max-width: 600px;
}

.lightbox-close {
    position: fixed;
    top: 30px;
    right: 30px;
    color: white;
    font-size: 2.5em;
    cursor: pointer;
    transition: transform 0.2s;
    z-index: 1002;
}

.lightbox-close:hover {
    transform: scale(1.2);
}

.lightbox-arrow {
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    font-size: 3em;
    color: white;
    cursor: pointer;
    transition: transform 0.2s, text-shadow 0.2s;
    user-select: none;
    z-index: 1001;
}

.lightbox-arrow:hover {
    transform: translateY(-50%) scale(1.2);
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.6);
}

.lightbox-prev {
    left: 50px;
}

.lightbox-next {
    right: 50px;
}

.lightbox-toggle-alt {
    margin-top: 15px;
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 2px solid white;
    border-radius: 4px;
    font-family: 'VCR_OSD_Mono', monospace;
    font-size: 0.9em;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
}

.lightbox-toggle-alt:hover {
    background: rgba(255, 255, 255, 0.4);
    transform: scale(1.05);
}

@media(max-width:1180px) { 
    #wrapper { width: calc(440px + 50vw); } 
    .main { width: 50vw; } 
} 
@media(max-width:910px) { 
    #wrapper { width: calc(360px + 52vw); } 
    .sidebar-left, .sidebar-right { width: 160px; } 
    .main { margin-left: 180px; margin-right: 180px; width: 52vw; } 
} 
@media(orientation:portrait) { 
    #wrapper { width: 96vw; } 
    .wrapper-2 { width: 94vw; } 
    .sidebar-left, .main, .sidebar-right { position: relative; width: 92vw; margin: 0.25rem 1vw; } 
    .gallery-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
}
</style>
</head>
<body>

<div id="wrapper"> 
    <div class="header"> 
        <img src="image\Bannerslim.gif" alt="Banner"> 
    </div> 
    <div class="title"><h1></h1></div> 

    <div class="links">
    </div>

    <div class="wrapper-2"> 
        <div class="sidebar-left"> 
            <!-- Jump Back Box -->
            <div class="box">
                <div class="jump-back-box">
                    <div class="jump-back-label">BACK TO..</div>
                    <div class="jump-back-items">
                        <a href="Home.html" class="jump-back-item" onclick="playClickAudio(); playAudioBeforeRedirect(this.href); return false;">HOME</a>
                        <span class="jump-back-item expandable" data-expand="projects-back">PROJECTS</span>
                        <div class="jump-back-submenu" id="projects-back-submenu">
                            <a href="Projects.html#bon" onclick="playClickAudio(); playAudioBeforeRedirect(this.href); return false;">BON BONS GUIDE TO DEATH AND LOVE</a>
                            <a href="Projects.html#subterria" onclick="playClickAudio(); playAudioBeforeRedirect(this.href); return false;">SUBTERRIA RISING</a>
                        </div>
                        <a href="Contact.html" class="jump-back-item" onclick="playClickAudio(); playAudioBeforeRedirect(this.href); return false;">CONTACT</a>
                    </div>
                </div>
            </div>

            <!-- Extras Box -->
            <div class="box">
                <div class="jump-back-box">
                    <div class="jump-back-label">EXTRAS</div>
                    <div class="jump-back-items">
                        <a href="Characters.html" class="jump-back-item" onclick="playClickAudio(); playAudioBeforeRedirect(this.href); return false;">CHARACTERS</a>
                        <a href="#" class="jump-back-item" onclick="playClickAudio(); return false;">CONCEPT DOC</a>
                        <a href="#" class="jump-back-item" onclick="playClickAudio(); return false;">FANART</a>
                        <a href="#" class="jump-back-item" onclick="playClickAudio(); return false;">EXTRA CONTENT</a>
                    </div>
                </div>
            </div>
        </div> 

        <div class="main"> 
            <div class="box">
                <h1 style="margin: 0 0 20px 0; font-size: 2.5em; padding: 0;">GALLERY</h1>
                
                <div style="display: flex; gap: 20px; margin-bottom: 30px;">
                    <!-- Index Box -->
                    <div style="flex: 0 0 250px; background: rgba(0, 0, 0, 0.3); border: 2px solid white; padding: 15px; border-radius: 4px;">
                        <div style="font-size: 1.2em; font-weight: bold; color: #00A0FF; margin-bottom: 15px; text-align: center;">INDEX</div>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <button class="gallery-index-btn" onclick="toggleGalleryCategory('original-art')" style="padding: 10px; background: rgba(0, 160, 255, 0.2); border: 2px solid white; color: white; cursor: pointer; font-family: 'VCR_OSD_Mono', monospace; transition: all 0.2s;">ORIGINAL ARTWORK</button>
                            <button class="gallery-index-btn" onclick="toggleGalleryCategory('fanart')" style="padding: 10px; background: rgba(0, 160, 255, 0.2); border: 2px solid white; color: white; cursor: pointer; font-family: 'VCR_OSD_Mono', monospace; transition: all 0.2s;">FANART</button>
                            <button class="gallery-index-btn" onclick="toggleGalleryCategory('3d-models')" style="padding: 10px; background: rgba(0, 160, 255, 0.2); border: 2px solid white; color: white; cursor: pointer; font-family: 'VCR_OSD_Mono', monospace; transition: all 0.2s;">3D MODELS</button>
                            <button class="gallery-index-btn" onclick="toggleGalleryCategory('college')" style="padding: 10px; background: rgba(0, 160, 255, 0.2); border: 2px solid white; color: white; cursor: pointer; font-family: 'VCR_OSD_Mono', monospace; transition: all 0.2s;">COLLEGE WORK</button>
                        </div>
                    </div>

                    <!-- Description Box -->
                    <div style="flex: 1; background: rgba(0, 0, 0, 0.3); border: 2px solid white; padding: 15px; border-radius: 4px;">
                        <p style="line-height: 1.6; color: rgba(255, 255, 255, 0.9); margin: 0; font-size: 0.95em;">
                            Welcome to my digital gallery! Here you'll find a collection of my artwork including original character designs, fanart, 3D models, and college projects. Each section showcases different aspects of my creative journey and artistic development. Click on a category in the index to explore!
                        </p>
                    </div>
                </div>

                <!-- Gallery Content -->
                <div id="gallery-content">
                </div>
            </div>
        </div> 
    </div> 
    <div class="footer"></div> 
</div>

<!-- Lightbox Modal -->
<div id="lightbox" class="lightbox">
    <div class="lightbox-content">
        <span class="lightbox-close">&times;</span>
        <span class="lightbox-arrow lightbox-prev">&lt;</span>
        <img id="lightbox-image" class="lightbox-image" src="" alt="">
        <span class="lightbox-arrow lightbox-next">&gt;</span>
        <button id="lightbox-toggle-alt" class="lightbox-toggle-alt" style="display: none;">View Alt</button>
        <div class="lightbox-info">
            <h3 id="lightbox-title"></h3>
            <p id="lightbox-description"></p>
        </div>
    </div>
</div>

<script>
// Gallery Category Data
const galleryData = {
    'original-art': {
        title: 'ORIGINAL ARTWORK',
        items: [
            { src: 'image/gallery/Leo.png', title: 'Leo', description: 'Original character art' },
            { src: 'image/gallery/Steph.png', title: 'Steph', description: 'Original character art' },
            { src: 'image/gallery/Torch.png', title: 'Torch', description: 'Original character art', alt: 'image/gallery/Torch_Alt.PNG' },
            { src: 'image/gallery/Vixen.png', title: 'Vixen', description: 'Original character art' },
            { src: 'image/gallery/Vance.png', title: 'Vance', description: 'Original character art', alt: 'image/gallery/Vance_Alt.PNG' },
            { src: 'image/gallery/Clementine.PNG', title: 'Clementine', description: 'Original character art' },
            { src: 'image/gallery/Clementine_Turnaround.PNG', title: 'Clementine Turnaround', description: 'Original character art', fit: 'horizontal' },
            { src: 'image/gallery/Lova_Turnaround.png', title: 'Lova Turnaround', description: 'Original character art', fit: 'horizontal' },
            { src: 'image/gallery/Lova.png', title: 'Lova', description: 'Original character art' },
            { src: 'image/gallery/Dino.png', title: 'Dino', description: 'Original character art', fit: 'horizontal' },
            { src: 'image/gallery/Artfight_3.PNG', title: 'Artfight 3', description: 'Original character art', fit: 'horizontal' },
            { src: 'image/gallery/Artfight_2.PNG', title: 'Artfight 2', description: 'Original character art' },
            { src: 'image/gallery/Artfight_1.PNG', title: 'Artfight 1', description: 'Original character art' },
            { src: 'image/gallery/Ena.PNG', title: 'Ena', description: 'Original character art', fit: 'horizontal' },
            { src: 'image/gallery/Artfight_4.PNG', title: 'Artfight 4', description: 'Original character art' },
            { src: 'image/gallery/Artfight_5.PNG', title: 'Artfight 5', description: 'Original character art' }
        ]
    },
    'fanart': {
        title: 'FANART',
        items: [
            { src: 'image/gallery/Goldshi.png', title: 'Fanart 1', description: 'Fanart' },
            { src: 'image/gallery/Argenti.PNG', title: 'Argenti', description: 'Fanart' },
            { src: 'image/gallery/Arnoll.PNG', title: 'Arnoll', description: 'Fanart' }
        ]
    },
    '3d-models': {
        title: '3D MODELS',
        items: [
            { src: 'image/gallery/Lova3dModelLowpoly.gif', title: 'Lova 3D Model (Lowpoly)', description: '3D model - Lowpoly version', alt: 'image/gallery/Idle_Lova3dModelLowpoly.gif|image/gallery/Spin_Lova3dModelLowpoly.gif' },
            { src: 'image/gallery/idle.gif', title: 'Lova 3D Model (Idle)', description: '3D model - Idle animation' }
        ]
    },
    'college': {
        title: 'COLLEGE WORK',
        items: [
            { src: 'image/gallery/FlowerMonsterSeries_02.PNG', title: 'Flower Monster Series 02', description: 'College project' },
            { src: 'image/gallery/FlowerMonsterSeries_01.PNG', title: 'Flower Monster Series 01', description: 'College project' },
            { src: 'image/gallery/Achi1.png', title: 'Achi 1', description: 'College project' },
            { src: 'image/gallery/Achi2.png', title: 'Achi 2', description: 'College project' }
        ]
    }
};

function toggleGalleryCategory(categoryId) {
    const contentDiv = document.getElementById('gallery-content');
    const categoryData = galleryData[categoryId];
    
    if (!categoryData) return;
    
    // Clear previous content
    contentDiv.innerHTML = '';
    
    // Create gallery grid
    const galleryGrid = document.createElement('div');
    galleryGrid.className = 'gallery-grid';
    galleryGrid.style.display = 'grid';
    
    // Use different grid layouts based on category
    if (categoryId === 'original-art' || categoryId === 'college' || categoryId === '3d-models') {
        galleryGrid.style.gridTemplateColumns = 'repeat(3, 1fr)';
    } else {
        galleryGrid.style.gridTemplateColumns = 'repeat(2, 1fr)';
    }
    
    galleryGrid.style.gap = '15px';
    galleryGrid.style.marginTop = '20px';
    
    // Add gallery items
    categoryData.items.forEach((item, index) => {
        const galleryItem = document.createElement('div');
        galleryItem.className = 'gallery-item';
        galleryItem.dataset.src = item.src;
        galleryItem.dataset.title = item.title;
        galleryItem.dataset.description = item.description;
        if (item.alt) galleryItem.dataset.alt = item.alt;
        if (item.fit) galleryItem.dataset.fit = item.fit;
        
        // Apply sizing and styling based on category and fit
        if (item.fit) {
            if (categoryId === 'original-art') {
                // For original artwork, span all 3 columns
                galleryItem.style.gridColumn = 'span 3';
                galleryItem.style.height = '300px';
            } else {
                // For other categories, span 2 columns
                galleryItem.style.gridColumn = 'span 2';
                galleryItem.style.height = '300px';
            }
        } else {
            // Set height based on category
            if (categoryId === '3d-models') {
                galleryItem.style.height = '500px';
            } else {
                galleryItem.style.height = '500px';
            }
        }
        
        const img = document.createElement('img');
        img.src = item.src;
        img.alt = item.title;
        img.style.cursor = 'pointer';
        img.style.width = '100%';
        img.style.height = '100%';
        img.style.display = 'block';
        
        // Use cover for all
        img.style.objectFit = 'cover';
        
        galleryItem.appendChild(img);
        galleryItem.addEventListener('click', () => {
            openLightboxFromDynamic(categoryId, index);
        });
        
        galleryGrid.appendChild(galleryItem);
    });
    
    contentDiv.appendChild(galleryGrid);
}

function openLightboxFromDynamic(categoryId, itemIndex) {
    const categoryData = galleryData[categoryId];
    const item = categoryData.items[itemIndex];
    
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    const lightboxTitle = document.getElementById('lightbox-title');
    const lightboxDescription = document.getElementById('lightbox-description');
    const toggleAltBtn = document.getElementById('lightbox-toggle-alt');
    const prevBtn = document.querySelector('.lightbox-prev');
    const nextBtn = document.querySelector('.lightbox-next');
    
    // Store current category and index for navigation
    lightbox.dataset.categoryId = categoryId;
    lightbox.dataset.itemIndex = itemIndex;
    lightbox.dataset.isShowingAlt = 'false';
    lightbox.dataset.altVersionIndex = '0';
    
    lightboxImage.src = item.src;
    lightboxTitle.textContent = item.title;
    lightboxDescription.textContent = item.description;
    
    if (item.alt) {
        toggleAltBtn.style.display = 'inline-block';
        const alts = Array.isArray(item.alt) ? item.alt : item.alt.split('|');
        toggleAltBtn.dataset.alts = JSON.stringify(alts);
        lightboxImage.dataset.originalSrc = item.src;
        toggleAltBtn.textContent = alts.length > 1 ? 'Shuffle' : 'View Alt';
    } else {
        toggleAltBtn.style.display = 'none';
    }
    
    lightbox.classList.add('active');
}

function navigateLightboxImage(direction) {
    const lightbox = document.getElementById('lightbox');
    const categoryId = lightbox.dataset.categoryId;
    const currentIndex = parseInt(lightbox.dataset.itemIndex);
    const categoryData = galleryData[categoryId];
    
    let newIndex = currentIndex + direction;
    
    // Wrap around
    if (newIndex < 0) {
        newIndex = categoryData.items.length - 1;
    } else if (newIndex >= categoryData.items.length) {
        newIndex = 0;
    }
    
    // Reset to original image when navigating
    lightbox.dataset.isShowingAlt = 'false';
    lightbox.dataset.altVersionIndex = '0';
    
    openLightboxFromDynamic(categoryId, newIndex);
}

function toggleAltImage() {
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    const toggleAltBtn = document.getElementById('lightbox-toggle-alt');
    const categoryId = lightbox.dataset.categoryId;
    const itemIndex = parseInt(lightbox.dataset.itemIndex);
    const item = galleryData[categoryId].items[itemIndex];
    
    if (!item.alt) return;
    
    const alts = Array.isArray(item.alt) ? item.alt : item.alt.split('|');
    let isShowingAlt = lightbox.dataset.isShowingAlt === 'true';
    let altVersionIndex = parseInt(lightbox.dataset.altVersionIndex);
    
    if (!isShowingAlt) {
        // Switch to first alt version
        isShowingAlt = true;
        altVersionIndex = 0;
        lightboxImage.src = alts[0];
    } else if (alts.length > 1) {
        // Cycle through alt versions
        altVersionIndex++;
        if (altVersionIndex >= alts.length) {
            // Go back to original
            isShowingAlt = false;
            lightboxImage.src = lightbox.querySelector('img').dataset.originalSrc || item.src;
        } else {
            lightboxImage.src = alts[altVersionIndex];
        }
    } else {
        // Single alt version, toggle back to original
        isShowingAlt = false;
        lightboxImage.src = item.src;
    }
    
    // Update state
    lightbox.dataset.isShowingAlt = isShowingAlt;
    lightbox.dataset.altVersionIndex = altVersionIndex;
    
    // Update button text
    if (isShowingAlt && alts.length > 0) {
        if (alts.length === 1) {
            toggleAltBtn.textContent = 'View Original';
        } else {
            toggleAltBtn.textContent = `Shuffle (${altVersionIndex + 1}/${alts.length})`;
        }
    } else {
        if (alts.length > 1) {
            toggleAltBtn.textContent = 'Shuffle';
        } else {
            toggleAltBtn.textContent = 'View Alt';
        }
    }
}

window.onload = () => {
    // Jump back expandable items
    const expandableBackItems = document.querySelectorAll('.jump-back-item.expandable');
    
    expandableBackItems.forEach(item => {
        item.addEventListener('click', () => {
            const expandId = item.dataset.expand;
            const submenu = document.getElementById(expandId + '-submenu');
            
            item.classList.toggle('expanded');
            submenu.classList.toggle('show');
        });
    });

    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    const lightboxTitle = document.getElementById('lightbox-title');
    const lightboxDescription = document.getElementById('lightbox-description');
    const closeBtn = document.querySelector('.lightbox-close');
    const prevBtn = document.querySelector('.lightbox-prev');
    const nextBtn = document.querySelector('.lightbox-next');
    const toggleAltBtn = document.getElementById('lightbox-toggle-alt');
    
    let currentImageIndex = -1;
    let currentImageData = {};
    let isShowingAlt = false;
    let altVersionIndex = 0;
    let allGalleryImages = [];
    
    // Get all gallery items
    const galleryItems = document.querySelectorAll('.gallery-item:not(.placeholder)');
    
    galleryItems.forEach((item) => {
        const altData = item.dataset.alt;
        let altArray = [];
        
        if (altData) {
            // Support both single alt (legacy) and multiple alts separated by |
            altArray = altData.split('|');
        }
        
        allGalleryImages.push({
            src: item.dataset.src,
            title: item.dataset.title,
            description: item.dataset.description,
            alt: altArray
        });
    });
    
    function openLightbox(index) {
        if (index < 0 || index >= allGalleryImages.length) return;
        
        const imageData = allGalleryImages[index];
        currentImageIndex = index;
        currentImageData = imageData;
        
        isShowingAlt = false;
        altVersionIndex = 0;
        lightboxImage.src = imageData.src;
        lightboxTitle.textContent = imageData.title;
        lightboxDescription.textContent = imageData.description;
        
        // Show/hide alt button based on whether alt image exists
        if (imageData.alt && imageData.alt.length > 0) {
            toggleAltBtn.style.display = 'inline-block';
            updateAltButtonText();
        } else {
            toggleAltBtn.style.display = 'none';
        }
        
        lightbox.classList.add('active');
    }
    
    function updateAltButtonText() {
        if (isShowingAlt && currentImageData.alt && currentImageData.alt.length > 0) {
            if (currentImageData.alt.length === 1) {
                toggleAltBtn.textContent = 'View Original';
            } else {
                toggleAltBtn.textContent = `Shuffle (${altVersionIndex + 1}/${currentImageData.alt.length})`;
            }
        } else {
            if (currentImageData.alt && currentImageData.alt.length > 1) {
                toggleAltBtn.textContent = 'Shuffle';
            } else {
                toggleAltBtn.textContent = 'View Alt';
            }
        }
    }
    
    function navigateImage(direction) {
        let newIndex = currentImageIndex + direction;
        
        // Wrap around
        if (newIndex < 0) {
            newIndex = allGalleryImages.length - 1;
        } else if (newIndex >= allGalleryImages.length) {
            newIndex = 0;
        }
        
        openLightbox(newIndex);
    }
    
    // Click on gallery items
    galleryItems.forEach((item, index) => {
        item.addEventListener('click', () => {
            openLightbox(index);
        });
    });
    
    // Navigate with arrow buttons
    prevBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        navigateLightboxImage(-1);
    });
    
    nextBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        navigateLightboxImage(1);
    });
    
    // Toggle between original and alt images
    toggleAltBtn.addEventListener('click', toggleAltImage);
    
    // Close lightbox
    closeBtn.addEventListener('click', () => {
        lightbox.classList.remove('active');
    });
    
    // Close when clicking outside
    lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) {
            lightbox.classList.remove('active');
        }
    });
    
    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (lightbox.classList.contains('active')) {
            if (e.key === 'ArrowLeft') {
                navigateImage(-1);
            } else if (e.key === 'ArrowRight') {
                navigateImage(1);
            } else if (e.key === 'Escape') {
                lightbox.classList.remove('active');
            }
        }
    });
    
    // Category toggle functionality
    const toggleButtons = document.querySelectorAll('.category-toggle');
    
    // Detect horizontal images and apply class
    const allImages = document.querySelectorAll('.gallery-item:not(.placeholder) img');
    allImages.forEach(img => {
        const checkImageDimensions = () => {
            if (img.naturalWidth && img.naturalHeight) {
                if (img.naturalWidth > img.naturalHeight) {
                    img.parentElement.classList.add('horizontal');
                }
            }
        };
        
        if (img.complete) {
            checkImageDimensions();
        } else {
            img.onload = checkImageDimensions;
        }
    });
    
    toggleButtons.forEach(button => {
        button.addEventListener('click', () => {
            const categoryId = button.dataset.toggle;
            const category = document.querySelector(`[data-category="${categoryId}"]`);
            
            button.classList.toggle('collapsed');
            category.classList.toggle('collapsed');
        });
    });
    
    // Navigation expandable items
    const expandableNavItems = document.querySelectorAll('.nav-item.expandable');
    
    expandableNavItems.forEach(item => {
        item.addEventListener('click', () => {
            const expandId = item.dataset.expand;
            const submenu = document.getElementById(expandId + '-submenu');
            
            item.classList.toggle('expanded');
            submenu.classList.toggle('show');
        });
    });
};
</script>

<!-- Sound Effects -->
<audio id="clickSound" src="audio/sifi click 2.wav" preload="auto"></audio>

<script>
  function playClickAudio() {
    const clickAudio = document.getElementById('clickSound');
    clickAudio.currentTime = 0;
    clickAudio.play().catch(()=>{});    
  }

  function playAudioBeforeRedirect(url) {
    const clickAudio = document.getElementById('clickSound');
    clickAudio.currentTime = 0;
    clickAudio.play();
    setTimeout(() => {
      window.location.href = url;
    }, 500);
  }
</script>
<script src="script.js"></script>

</body>
</html>
